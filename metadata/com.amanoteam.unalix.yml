Categories:
  - Internet
License: LGPL-3.0-only
SourceCode: https://github.com/AmanoTeam/UnalixAndroid
IssueTracker: https://github.com/AmanoTeam/UnalixAndroid/issues
AutoName: Unalix
RepoType: git
Repo: https://github.com/AmanoTeam/UnalixAndroid

Builds:
  - versionName: 0.6.1
    versionCode: 7
    commit: v0.6.1
    subdir: app
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y openjdk-11-jdk
      - update-alternatives --auto java
    gradle:
      - yes
    prebuild: sed -i '29,36d' build.gradle
    build:
      - export ANDROID_NDK=$$NDK$$
      - git clone --quiet --depth=1 --branch=v1.6.2 https://github.com/nim-lang/Nim.git src/main/jni/nim
      - git clone --quiet --depth=1 https://github.com/nim-lang/csources_v1.git src/main/jni/nim/csources_v1
      - cd src/main/jni/nim/csources_v1
      - make --jobs
      - cd ..
      - ./bin/nim compile ./koch.nim
      - ./koch boot
      - ./koch nimble
      - export PATH=$(realpath ./bin):${PATH}
      - cd ../tool
      - nimble install --define:ssl --accept
      - ./tool download pcre
      - chmod 777 --recursive ../pcre
      - ./tool build pcre --architecture:arm
      - ./tool build pcre --architecture:arm64
      - ./tool build pcre --architecture:i386
      - ./tool build pcre --architecture:amd64
      - ./tool download libressl
      - chmod 777 --recursive ../libressl
      - ./tool patch libressl
      - ./tool build libressl --architecture:arm
      - ./tool build libressl --architecture:arm64
      - ./tool build libressl --architecture:i386
      - ./tool build libressl --architecture:amd64
      - ./tool build wrapper --architecture:arm
      - ./tool build wrapper --architecture:arm64
      - ./tool build wrapper --architecture:i386
      - ./tool build wrapper --architecture:amd64
    ndk: r23b

AutoUpdateMode: None
UpdateCheckMode: None
CurrentVersion: 0.6.1
CurrentVersionCode: 7
