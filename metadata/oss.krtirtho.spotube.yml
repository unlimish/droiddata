AntiFeatures:
  - NonFreeNet
Categories:
  - Internet
  - Multimedia
License: BSD-4-Clause
AuthorName: Kingkor Roy Tirtho
AuthorEmail: krtirtho@gmail.com
SourceCode: https://github.com/KRTirtho/spotube
IssueTracker: https://github.com/KRTirtho/spotube/issues
Changelog: https://github.com/KRTirtho/spotube/blob/HEAD/CHANGELOG.md

AutoName: Spotube

RepoType: git
Repo: https://github.com/KRTirtho/spotube.git

Builds:
  - versionName: 2.2.1
    versionCode: 11
    commit: 29697d5ae5114ee71754af7aad3d3a7fc3987c0c
    output: build/app/outputs/apk/release/*.apk
    srclibs:
      - flutter@3.0.1
    rm:
      - ios
      - linux
      - web
      - windows
      - macos
      - scripts
      - deb-struct
      - choco-struct
      - aur-struct
    build:
      - $$flutter$$/bin/flutter config --no-analytics
      - $$flutter$$/bin/flutter pub get
      - export HASH1='WyJUSnI4QlFITWRVVUlMQjZoYTRIZFUzMklMaFdzV1NMaEZWQWwxUGNzMU9uZmpGdVRxVWtQZEk0ODhnTmJIb2tRIiwiQURLZkJ5WUU4d1NYdHFZczV1Wm0wVEJRMlJGUkc2a29pZVFiNWJVRE9jRzUya29WVkxTS0lQUlNMbUdBaHgycCIsImZJcHB2bDBIeDZEMDQ5YzlWYnlwV2RLZllnbWdRMGc1YmV6ZmJmQXQzaHNjcGVDbFFXOTZGajNhc3JsTG00QjciLCAiNHd4MWlmejVNUW9VYnhyc1kxRENTMDJMTVNOdFZKUmY0SXJjWTB6OW9IVVlZU05WUndrZUtHUW0xSjlJSE9GWiIsInlkOWQ2REl4VzY4dEhMbWxBVTZZUGxaVTV2LWRlQ2pzcHBhdWxwT19xUmhsV1NDVyFuCKutHeifAnDWHaTURdOIngSuKsamYyX0Fkd1Z6bndjMkhiTHhzTlJldEdsTlFLdDl1ZHozbGZqdTkwOEw5ZWViIiwiRVJnNjJpajFzVnJzdkRTS1hrbVlIemRzRlN3c29VR21GcEVRRVR6Sm5ROHc4eVc1b3plM1hmUDZabFJZVU8xWCIsIjdybGczUExtQzFMUHA3MHZmbEtuWHV1a29BQmpoMTE3b2t4SG5TamFLeENSd1VXVGdSVVo3WGU5dVR0WDVvUS0iLCJiMmUyR2NzUTlEay0zeXVpTW01azNTTERkLXpFXzZTQUdjMENNMUtpbGs4Y21ySjEzem5mT05yRXh3YTJJWnlpIiwiMnZYWmJObWt2SUJ5MnFVSElxc2Q4VHNCRmFLaFgtSW5ZVjU4Wk4wUm5nVHBLNmdSRDlfcWFrMWVJdGFMS2NicyJd'
      - export HASH2='W3siY2xpZW50SWQiOiJlNGQyMGIwMTMwMjI0MzMyOGQzNTg1MjQxYTFiMmIyNSIsImNsaWVudFNlY3JldCI6IjNkZDIxNjM1MjRjNjQ2NWM5MTZjYzRkNmU2ZmRhOTc3In0seyJjbGllbnRJZCI6ImUzODRkYmFkNmM3ZjQ2OTJiNjI3ZDRhMDZkOTE4M2NmIiwiY2xpZW50U2VjcmV0IjoiZGNkNzY2OGI2ZjAzNDM2Yzk5OTIzNDMyOWVlYTYxNmYifSx7ImNsaWVudElkIjoiZWVmZDBiYWU2NjRkNGY1ODhmMDg3NDFkOWU2ZjNlYmUiLCJjbGllbnRTZWNyZXQiOiI4YTE4ZDgyMGQ1YmQ0NTU3YjMwZmU3YTQ1OWY4ZjNhYiJ9LHsiY2xpZW50SWQiOiI4MWQxZGRhYzljNWU0Njk2YTlmNDdhZGZmODhkZmE5NSIsImNsaWVudFNlY3JldCI6ImY1NTg5ZTNiN2MwZjRiZTFhY2ZkODc3OWUyN2YzMWFhIn0seyJjbGllbnRJZCI6ImFhYzZlYmQ3Mjg5MDFuCKutHeifANdfDrOidsUckSwMDgxIiwiY2xpZW50U2VjcmV0IjoiNTk4ODk2OWFiMWUwNGUxNDhmNWRkZDI4ZWE4OThlMzMifSx7ImNsaWVudElkIjoiMDAwYWUwNzVjOGFhNDcxMTk0NTc5YmM3ZDhlYTY5MjciLCJjbGllbnRTZWNyZXQiOiJkNzBhZWM4ZjhjN2Q0ZTY0YTlhMDkwYTY0N2UxZDBmYiJ9LHsiY2xpZW50SWQiOiJhZjQ4OGI0MDhkNWM0NDAyYWQxNGY3MGNjZjMwMTdmOCIsImNsaWVudFNlY3JldCI6IjEzZTkwMzk5YTEyMjQzMjE4Y2U1MDE2YmZlZWIyNTA0In0seyJjbGllbnRJZCI6IjYyYmI1NWU2Y2Y2MDQwOTZhZDQ2ODBiYjI1NGY4ZjU1IiwiY2xpZW50U2VjcmV0IjoiZGM1NGIxMzhjODJkNGQ2OWJjZGQ0MDFlOWRjNmUwZTAifSx7ImNsaWVudElkIjoiZGFlM2QzNjQ4ODhiNDhjN2JhOTQwYmU3OWYxNDBjMDUiLCJjbGllbnRTZWNyZXQiOiJhMzU2ZjEyNDE4YjI0ODBkYWJmODRkOThhOTUxYTliYSJ9LHsiY2xpZW50SWQiOiIzZmM0OWZjNjkwYzA0NWVhYTBmMGEyNDI2ZGQ0YTkxZSIsImNsaWVudFNlY3JldCI6IjJiYjdkYTY1YzUwNjQ4YWVhOGI3YmMwOWQ0ZWY0MGZlIn1d'
      - $$flutter$$/bin/dart bin/create-secrets.dart --fdroid $HASH1 $HASH2
      - $$flutter$$/bin/flutter build apk --release --verbose --obfuscate --split-debug-info=.
      - find . | sed -e "s/[^-][^\/]*\// |/g" -e "s/|\([^ ]\)/|-\1/"

  - versionName: 2.3.0
    versionCode: 12
    commit: 62ea78dfbfe613921858b5a73f04f001ed10018f
    output: build/app/outputs/apk/release/*.apk
    srclibs:
      - flutter@3.0.4
    rm:
      - ios
      - linux
      - web
      - windows
      - macos
      - scripts
      - choco-struct
      - aur-struct
    build:
      - $$flutter$$/bin/flutter config --no-analytics
      - $$flutter$$/bin/flutter pub get
      - export HASH1='WyJUSnI4QlFITWRVVUlMQjZoYTRIZFUzMklMaFdzV1NMaEZWQWwxUGNzMU9uZmpGdVRxVWtQZEk0ODhnTmJIb2tRIiwiQURLZkJ5WUU4d1NYdHFZczV1Wm0wVEJRMlJGUkc2a29pZVFiNWJVRE9jRzUya29WVkxTS0lQUlNMbUdBaHgycCIsImZJcHB2bDBIeDZEMDQ5YzlWYnlwV2RLZllnbWdRMGc1YmV6ZmJmQXQzaHNjcGVDbFFXOTZGajNhc3JsTG00QjciLCAiNHd4MWlmejVNUW9VYnhyc1kxRENTMDJMTVNOdFZKUmY0SXJjWTB6OW9IVVlZU05WUndrZUtHUW0xSjlJSE9GWiIsInlkOWQ2REl4VzY4dEhMbWxBVTZZUGxaVTV2LWRlQ2pzcHBhdWxwT19xUmhsV1NDVyFuCKutHeifAnDWHaTURdOIngSuKsamYyX0Fkd1Z6bndjMkhiTHhzTlJldEdsTlFLdDl1ZHozbGZqdTkwOEw5ZWViIiwiRVJnNjJpajFzVnJzdkRTS1hrbVlIemRzRlN3c29VR21GcEVRRVR6Sm5ROHc4eVc1b3plM1hmUDZabFJZVU8xWCIsIjdybGczUExtQzFMUHA3MHZmbEtuWHV1a29BQmpoMTE3b2t4SG5TamFLeENSd1VXVGdSVVo3WGU5dVR0WDVvUS0iLCJiMmUyR2NzUTlEay0zeXVpTW01azNTTERkLXpFXzZTQUdjMENNMUtpbGs4Y21ySjEzem5mT05yRXh3YTJJWnlpIiwiMnZYWmJObWt2SUJ5MnFVSElxc2Q4VHNCRmFLaFgtSW5ZVjU4Wk4wUm5nVHBLNmdSRDlfcWFrMWVJdGFMS2NicyJd'
      - export HASH2='W3siY2xpZW50SWQiOiJlNGQyMGIwMTMwMjI0MzMyOGQzNTg1MjQxYTFiMmIyNSIsImNsaWVudFNlY3JldCI6IjNkZDIxNjM1MjRjNjQ2NWM5MTZjYzRkNmU2ZmRhOTc3In0seyJjbGllbnRJZCI6ImUzODRkYmFkNmM3ZjQ2OTJiNjI3ZDRhMDZkOTE4M2NmIiwiY2xpZW50U2VjcmV0IjoiZGNkNzY2OGI2ZjAzNDM2Yzk5OTIzNDMyOWVlYTYxNmYifSx7ImNsaWVudElkIjoiZWVmZDBiYWU2NjRkNGY1ODhmMDg3NDFkOWU2ZjNlYmUiLCJjbGllbnRTZWNyZXQiOiI4YTE4ZDgyMGQ1YmQ0NTU3YjMwZmU3YTQ1OWY4ZjNhYiJ9LHsiY2xpZW50SWQiOiI4MWQxZGRhYzljNWU0Njk2YTlmNDdhZGZmODhkZmE5NSIsImNsaWVudFNlY3JldCI6ImY1NTg5ZTNiN2MwZjRiZTFhY2ZkODc3OWUyN2YzMWFhIn0seyJjbGllbnRJZCI6ImFhYzZlYmQ3Mjg5MDFuCKutHeifANdfDrOidsUckSwMDgxIiwiY2xpZW50U2VjcmV0IjoiNTk4ODk2OWFiMWUwNGUxNDhmNWRkZDI4ZWE4OThlMzMifSx7ImNsaWVudElkIjoiMDAwYWUwNzVjOGFhNDcxMTk0NTc5YmM3ZDhlYTY5MjciLCJjbGllbnRTZWNyZXQiOiJkNzBhZWM4ZjhjN2Q0ZTY0YTlhMDkwYTY0N2UxZDBmYiJ9LHsiY2xpZW50SWQiOiJhZjQ4OGI0MDhkNWM0NDAyYWQxNGY3MGNjZjMwMTdmOCIsImNsaWVudFNlY3JldCI6IjEzZTkwMzk5YTEyMjQzMjE4Y2U1MDE2YmZlZWIyNTA0In0seyJjbGllbnRJZCI6IjYyYmI1NWU2Y2Y2MDQwOTZhZDQ2ODBiYjI1NGY4ZjU1IiwiY2xpZW50U2VjcmV0IjoiZGM1NGIxMzhjODJkNGQ2OWJjZGQ0MDFlOWRjNmUwZTAifSx7ImNsaWVudElkIjoiZGFlM2QzNjQ4ODhiNDhjN2JhOTQwYmU3OWYxNDBjMDUiLCJjbGllbnRTZWNyZXQiOiJhMzU2ZjEyNDE4YjI0ODBkYWJmODRkOThhOTUxYTliYSJ9LHsiY2xpZW50SWQiOiIzZmM0OWZjNjkwYzA0NWVhYTBmMGEyNDI2ZGQ0YTkxZSIsImNsaWVudFNlY3JldCI6IjJiYjdkYTY1YzUwNjQ4YWVhOGI3YmMwOWQ0ZWY0MGZlIn1d'
      - $$flutter$$/bin/dart bin/create-secrets.dart --fdroid $HASH1 $HASH2
      - $$flutter$$/bin/flutter build apk --release --verbose --obfuscate --split-debug-info=.
      - find . | sed -e "s/[^-][^\/]*\// |/g" -e "s/|\([^ ]\)/|-\1/"

  - versionName: 2.4.0
    versionCode: 13
    disable: binary librust.so
    commit: 192acc169ed80af5571442374a263df8983676e3
    output: build/app/outputs/apk/release/*.apk
    srclibs:
      - flutter@3.0.4
    rm:
      - ios
      - linux
      - web
      - windows
      - macos
      - scripts
      - choco-struct
      - aur-struct
    build:
      - $$flutter$$/bin/flutter config --no-analytics
      - $$flutter$$/bin/flutter pub get
      - export HASH1='WyJUSnI4QlFITWRVVUlMQjZoYTRIZFUzMklMaFdzV1NMaEZWQWwxUGNzMU9uZmpGdVRxVWtQZEk0ODhnTmJIb2tRIiwiQURLZkJ5WUU4d1NYdHFZczV1Wm0wVEJRMlJGUkc2a29pZVFiNWJVRE9jRzUya29WVkxTS0lQUlNMbUdBaHgycCIsImZJcHB2bDBIeDZEMDQ5YzlWYnlwV2RLZllnbWdRMGc1YmV6ZmJmQXQzaHNjcGVDbFFXOTZGajNhc3JsTG00QjciLCAiNHd4MWlmejVNUW9VYnhyc1kxRENTMDJMTVNOdFZKUmY0SXJjWTB6OW9IVVlZU05WUndrZUtHUW0xSjlJSE9GWiIsInlkOWQ2REl4VzY4dEhMbWxBVTZZUGxaVTV2LWRlQ2pzcHBhdWxwT19xUmhsV1NDVyFuCKutHeifAnDWHaTURdOIngSuKsamYyX0Fkd1Z6bndjMkhiTHhzTlJldEdsTlFLdDl1ZHozbGZqdTkwOEw5ZWViIiwiRVJnNjJpajFzVnJzdkRTS1hrbVlIemRzRlN3c29VR21GcEVRRVR6Sm5ROHc4eVc1b3plM1hmUDZabFJZVU8xWCIsIjdybGczUExtQzFMUHA3MHZmbEtuWHV1a29BQmpoMTE3b2t4SG5TamFLeENSd1VXVGdSVVo3WGU5dVR0WDVvUS0iLCJiMmUyR2NzUTlEay0zeXVpTW01azNTTERkLXpFXzZTQUdjMENNMUtpbGs4Y21ySjEzem5mT05yRXh3YTJJWnlpIiwiMnZYWmJObWt2SUJ5MnFVSElxc2Q4VHNCRmFLaFgtSW5ZVjU4Wk4wUm5nVHBLNmdSRDlfcWFrMWVJdGFMS2NicyJd'
      - export HASH2='W3siY2xpZW50SWQiOiJlNGQyMGIwMTMwMjI0MzMyOGQzNTg1MjQxYTFiMmIyNSIsImNsaWVudFNlY3JldCI6IjNkZDIxNjM1MjRjNjQ2NWM5MTZjYzRkNmU2ZmRhOTc3In0seyJjbGllbnRJZCI6ImUzODRkYmFkNmM3ZjQ2OTJiNjI3ZDRhMDZkOTE4M2NmIiwiY2xpZW50U2VjcmV0IjoiZGNkNzY2OGI2ZjAzNDM2Yzk5OTIzNDMyOWVlYTYxNmYifSx7ImNsaWVudElkIjoiZWVmZDBiYWU2NjRkNGY1ODhmMDg3NDFkOWU2ZjNlYmUiLCJjbGllbnRTZWNyZXQiOiI4YTE4ZDgyMGQ1YmQ0NTU3YjMwZmU3YTQ1OWY4ZjNhYiJ9LHsiY2xpZW50SWQiOiI4MWQxZGRhYzljNWU0Njk2YTlmNDdhZGZmODhkZmE5NSIsImNsaWVudFNlY3JldCI6ImY1NTg5ZTNiN2MwZjRiZTFhY2ZkODc3OWUyN2YzMWFhIn0seyJjbGllbnRJZCI6ImFhYzZlYmQ3Mjg5MDFuCKutHeifANdfDrOidsUckSwMDgxIiwiY2xpZW50U2VjcmV0IjoiNTk4ODk2OWFiMWUwNGUxNDhmNWRkZDI4ZWE4OThlMzMifSx7ImNsaWVudElkIjoiMDAwYWUwNzVjOGFhNDcxMTk0NTc5YmM3ZDhlYTY5MjciLCJjbGllbnRTZWNyZXQiOiJkNzBhZWM4ZjhjN2Q0ZTY0YTlhMDkwYTY0N2UxZDBmYiJ9LHsiY2xpZW50SWQiOiJhZjQ4OGI0MDhkNWM0NDAyYWQxNGY3MGNjZjMwMTdmOCIsImNsaWVudFNlY3JldCI6IjEzZTkwMzk5YTEyMjQzMjE4Y2U1MDE2YmZlZWIyNTA0In0seyJjbGllbnRJZCI6IjYyYmI1NWU2Y2Y2MDQwOTZhZDQ2ODBiYjI1NGY4ZjU1IiwiY2xpZW50U2VjcmV0IjoiZGM1NGIxMzhjODJkNGQ2OWJjZGQ0MDFlOWRjNmUwZTAifSx7ImNsaWVudElkIjoiZGFlM2QzNjQ4ODhiNDhjN2JhOTQwYmU3OWYxNDBjMDUiLCJjbGllbnRTZWNyZXQiOiJhMzU2ZjEyNDE4YjI0ODBkYWJmODRkOThhOTUxYTliYSJ9LHsiY2xpZW50SWQiOiIzZmM0OWZjNjkwYzA0NWVhYTBmMGEyNDI2ZGQ0YTkxZSIsImNsaWVudFNlY3JldCI6IjJiYjdkYTY1YzUwNjQ4YWVhOGI3YmMwOWQ0ZWY0MGZlIn1d'
      - $$flutter$$/bin/dart bin/create-secrets.dart --fdroid $HASH1 $HASH2
      - $$flutter$$/bin/flutter build apk --release --verbose --obfuscate --split-debug-info=.
      - find . | sed -e "s/[^-][^\/]*\// |/g" -e "s/|\([^ ]\)/|-\1/"

  - versionName: 2.4.1
    versionCode: 14
    disable: binary librust.so
    commit: 08575e3d09d90bb5144600c0c66316822956f628
    output: build/app/outputs/apk/release/*.apk
    srclibs:
      - flutter@3.0.4
    rm:
      - ios
      - linux
      - web
      - windows
      - macos
      - scripts
      - choco-struct
      - aur-struct
    build:
      - $$flutter$$/bin/flutter config --no-analytics
      - $$flutter$$/bin/flutter pub get
      - export HASH1='WyJUSnI4QlFITWRVVUlMQjZoYTRIZFUzMklMaFdzV1NMaEZWQWwxUGNzMU9uZmpGdVRxVWtQZEk0ODhnTmJIb2tRIiwiQURLZkJ5WUU4d1NYdHFZczV1Wm0wVEJRMlJGUkc2a29pZVFiNWJVRE9jRzUya29WVkxTS0lQUlNMbUdBaHgycCIsImZJcHB2bDBIeDZEMDQ5YzlWYnlwV2RLZllnbWdRMGc1YmV6ZmJmQXQzaHNjcGVDbFFXOTZGajNhc3JsTG00QjciLCAiNHd4MWlmejVNUW9VYnhyc1kxRENTMDJMTVNOdFZKUmY0SXJjWTB6OW9IVVlZU05WUndrZUtHUW0xSjlJSE9GWiIsInlkOWQ2REl4VzY4dEhMbWxBVTZZUGxaVTV2LWRlQ2pzcHBhdWxwT19xUmhsV1NDVyFuCKutHeifAnDWHaTURdOIngSuKsamYyX0Fkd1Z6bndjMkhiTHhzTlJldEdsTlFLdDl1ZHozbGZqdTkwOEw5ZWViIiwiRVJnNjJpajFzVnJzdkRTS1hrbVlIemRzRlN3c29VR21GcEVRRVR6Sm5ROHc4eVc1b3plM1hmUDZabFJZVU8xWCIsIjdybGczUExtQzFMUHA3MHZmbEtuWHV1a29BQmpoMTE3b2t4SG5TamFLeENSd1VXVGdSVVo3WGU5dVR0WDVvUS0iLCJiMmUyR2NzUTlEay0zeXVpTW01azNTTERkLXpFXzZTQUdjMENNMUtpbGs4Y21ySjEzem5mT05yRXh3YTJJWnlpIiwiMnZYWmJObWt2SUJ5MnFVSElxc2Q4VHNCRmFLaFgtSW5ZVjU4Wk4wUm5nVHBLNmdSRDlfcWFrMWVJdGFMS2NicyJd'
      - export HASH2='W3siY2xpZW50SWQiOiJlNGQyMGIwMTMwMjI0MzMyOGQzNTg1MjQxYTFiMmIyNSIsImNsaWVudFNlY3JldCI6IjNkZDIxNjM1MjRjNjQ2NWM5MTZjYzRkNmU2ZmRhOTc3In0seyJjbGllbnRJZCI6ImUzODRkYmFkNmM3ZjQ2OTJiNjI3ZDRhMDZkOTE4M2NmIiwiY2xpZW50U2VjcmV0IjoiZGNkNzY2OGI2ZjAzNDM2Yzk5OTIzNDMyOWVlYTYxNmYifSx7ImNsaWVudElkIjoiZWVmZDBiYWU2NjRkNGY1ODhmMDg3NDFkOWU2ZjNlYmUiLCJjbGllbnRTZWNyZXQiOiI4YTE4ZDgyMGQ1YmQ0NTU3YjMwZmU3YTQ1OWY4ZjNhYiJ9LHsiY2xpZW50SWQiOiI4MWQxZGRhYzljNWU0Njk2YTlmNDdhZGZmODhkZmE5NSIsImNsaWVudFNlY3JldCI6ImY1NTg5ZTNiN2MwZjRiZTFhY2ZkODc3OWUyN2YzMWFhIn0seyJjbGllbnRJZCI6ImFhYzZlYmQ3Mjg5MDFuCKutHeifANdfDrOidsUckSwMDgxIiwiY2xpZW50U2VjcmV0IjoiNTk4ODk2OWFiMWUwNGUxNDhmNWRkZDI4ZWE4OThlMzMifSx7ImNsaWVudElkIjoiMDAwYWUwNzVjOGFhNDcxMTk0NTc5YmM3ZDhlYTY5MjciLCJjbGllbnRTZWNyZXQiOiJkNzBhZWM4ZjhjN2Q0ZTY0YTlhMDkwYTY0N2UxZDBmYiJ9LHsiY2xpZW50SWQiOiJhZjQ4OGI0MDhkNWM0NDAyYWQxNGY3MGNjZjMwMTdmOCIsImNsaWVudFNlY3JldCI6IjEzZTkwMzk5YTEyMjQzMjE4Y2U1MDE2YmZlZWIyNTA0In0seyJjbGllbnRJZCI6IjYyYmI1NWU2Y2Y2MDQwOTZhZDQ2ODBiYjI1NGY4ZjU1IiwiY2xpZW50U2VjcmV0IjoiZGM1NGIxMzhjODJkNGQ2OWJjZGQ0MDFlOWRjNmUwZTAifSx7ImNsaWVudElkIjoiZGFlM2QzNjQ4ODhiNDhjN2JhOTQwYmU3OWYxNDBjMDUiLCJjbGllbnRTZWNyZXQiOiJhMzU2ZjEyNDE4YjI0ODBkYWJmODRkOThhOTUxYTliYSJ9LHsiY2xpZW50SWQiOiIzZmM0OWZjNjkwYzA0NWVhYTBmMGEyNDI2ZGQ0YTkxZSIsImNsaWVudFNlY3JldCI6IjJiYjdkYTY1YzUwNjQ4YWVhOGI3YmMwOWQ0ZWY0MGZlIn1d'
      - $$flutter$$/bin/dart bin/create-secrets.dart --fdroid $HASH1 $HASH2
      - $$flutter$$/bin/flutter build apk --release --verbose --obfuscate --split-debug-info=.
      - find . | sed -e "s/[^-][^\/]*\// |/g" -e "s/|\([^ ]\)/|-\1/"

  - versionName: 2.5.0
    versionCode: 15
    disable: binary librust.so
    commit: c83410bac2ae09e74daa737897eb6f5b2067d31b
    output: build/app/outputs/apk/release/*.apk
    srclibs:
      - flutter@3.3.4
    rm:
      - ios
      - linux
      - web
      - windows
      - macos
      - scripts
      - choco-struct
      - aur-struct
    build:
      - $$flutter$$/bin/flutter config --no-analytics
      - $$flutter$$/bin/flutter pub get
      - export HASH1='WyJUSnI4QlFITWRVVUlMQjZoYTRIZFUzMklMaFdzV1NMaEZWQWwxUGNzMU9uZmpGdVRxVWtQZEk0ODhnTmJIb2tRIiwiQURLZkJ5WUU4d1NYdHFZczV1Wm0wVEJRMlJGUkc2a29pZVFiNWJVRE9jRzUya29WVkxTS0lQUlNMbUdBaHgycCIsImZJcHB2bDBIeDZEMDQ5YzlWYnlwV2RLZllnbWdRMGc1YmV6ZmJmQXQzaHNjcGVDbFFXOTZGajNhc3JsTG00QjciLCAiNHd4MWlmejVNUW9VYnhyc1kxRENTMDJMTVNOdFZKUmY0SXJjWTB6OW9IVVlZU05WUndrZUtHUW0xSjlJSE9GWiIsInlkOWQ2REl4VzY4dEhMbWxBVTZZUGxaVTV2LWRlQ2pzcHBhdWxwT19xUmhsV1NDVyFuCKutHeifAnDWHaTURdOIngSuKsamYyX0Fkd1Z6bndjMkhiTHhzTlJldEdsTlFLdDl1ZHozbGZqdTkwOEw5ZWViIiwiRVJnNjJpajFzVnJzdkRTS1hrbVlIemRzRlN3c29VR21GcEVRRVR6Sm5ROHc4eVc1b3plM1hmUDZabFJZVU8xWCIsIjdybGczUExtQzFMUHA3MHZmbEtuWHV1a29BQmpoMTE3b2t4SG5TamFLeENSd1VXVGdSVVo3WGU5dVR0WDVvUS0iLCJiMmUyR2NzUTlEay0zeXVpTW01azNTTERkLXpFXzZTQUdjMENNMUtpbGs4Y21ySjEzem5mT05yRXh3YTJJWnlpIiwiMnZYWmJObWt2SUJ5MnFVSElxc2Q4VHNCRmFLaFgtSW5ZVjU4Wk4wUm5nVHBLNmdSRDlfcWFrMWVJdGFMS2NicyJd'
      - export HASH2='W3siY2xpZW50SWQiOiJlNGQyMGIwMTMwMjI0MzMyOGQzNTg1MjQxYTFiMmIyNSIsImNsaWVudFNlY3JldCI6IjNkZDIxNjM1MjRjNjQ2NWM5MTZjYzRkNmU2ZmRhOTc3In0seyJjbGllbnRJZCI6ImUzODRkYmFkNmM3ZjQ2OTJiNjI3ZDRhMDZkOTE4M2NmIiwiY2xpZW50U2VjcmV0IjoiZGNkNzY2OGI2ZjAzNDM2Yzk5OTIzNDMyOWVlYTYxNmYifSx7ImNsaWVudElkIjoiZWVmZDBiYWU2NjRkNGY1ODhmMDg3NDFkOWU2ZjNlYmUiLCJjbGllbnRTZWNyZXQiOiI4YTE4ZDgyMGQ1YmQ0NTU3YjMwZmU3YTQ1OWY4ZjNhYiJ9LHsiY2xpZW50SWQiOiI4MWQxZGRhYzljNWU0Njk2YTlmNDdhZGZmODhkZmE5NSIsImNsaWVudFNlY3JldCI6ImY1NTg5ZTNiN2MwZjRiZTFhY2ZkODc3OWUyN2YzMWFhIn0seyJjbGllbnRJZCI6ImFhYzZlYmQ3Mjg5MDFuCKutHeifANdfDrOidsUckSwMDgxIiwiY2xpZW50U2VjcmV0IjoiNTk4ODk2OWFiMWUwNGUxNDhmNWRkZDI4ZWE4OThlMzMifSx7ImNsaWVudElkIjoiMDAwYWUwNzVjOGFhNDcxMTk0NTc5YmM3ZDhlYTY5MjciLCJjbGllbnRTZWNyZXQiOiJkNzBhZWM4ZjhjN2Q0ZTY0YTlhMDkwYTY0N2UxZDBmYiJ9LHsiY2xpZW50SWQiOiJhZjQ4OGI0MDhkNWM0NDAyYWQxNGY3MGNjZjMwMTdmOCIsImNsaWVudFNlY3JldCI6IjEzZTkwMzk5YTEyMjQzMjE4Y2U1MDE2YmZlZWIyNTA0In0seyJjbGllbnRJZCI6IjYyYmI1NWU2Y2Y2MDQwOTZhZDQ2ODBiYjI1NGY4ZjU1IiwiY2xpZW50U2VjcmV0IjoiZGM1NGIxMzhjODJkNGQ2OWJjZGQ0MDFlOWRjNmUwZTAifSx7ImNsaWVudElkIjoiZGFlM2QzNjQ4ODhiNDhjN2JhOTQwYmU3OWYxNDBjMDUiLCJjbGllbnRTZWNyZXQiOiJhMzU2ZjEyNDE4YjI0ODBkYWJmODRkOThhOTUxYTliYSJ9LHsiY2xpZW50SWQiOiIzZmM0OWZjNjkwYzA0NWVhYTBmMGEyNDI2ZGQ0YTkxZSIsImNsaWVudFNlY3JldCI6IjJiYjdkYTY1YzUwNjQ4YWVhOGI3YmMwOWQ0ZWY0MGZlIn1d'
      - $$flutter$$/bin/dart bin/create-secrets.dart --fdroid $HASH1 $HASH2
      - $$flutter$$/bin/flutter build apk --release --verbose --obfuscate --split-debug-info=.
      - find . | sed -e "s/[^-][^\/]*\// |/g" -e "s/|\([^ ]\)/|-\1/"

  - versionName: 2.6.0
    versionCode: 16
    disable: binary librust.so
    commit: 461daf0271372f484ed1635aa58e3888b183201a
    output: build/app/outputs/apk/release/*.apk
    srclibs:
      - flutter@3.3.4
    rm:
      - ios
      - linux
      - web
      - windows
      - macos
      - scripts
      - choco-struct
      - aur-struct
    build:
      - $$flutter$$/bin/flutter config --no-analytics
      - $$flutter$$/bin/flutter pub get
      - export HASH1='WyJUSnI4QlFITWRVVUlMQjZoYTRIZFUzMklMaFdzV1NMaEZWQWwxUGNzMU9uZmpGdVRxVWtQZEk0ODhnTmJIb2tRIiwiQURLZkJ5WUU4d1NYdHFZczV1Wm0wVEJRMlJGUkc2a29pZVFiNWJVRE9jRzUya29WVkxTS0lQUlNMbUdBaHgycCIsImZJcHB2bDBIeDZEMDQ5YzlWYnlwV2RLZllnbWdRMGc1YmV6ZmJmQXQzaHNjcGVDbFFXOTZGajNhc3JsTG00QjciLCAiNHd4MWlmejVNUW9VYnhyc1kxRENTMDJMTVNOdFZKUmY0SXJjWTB6OW9IVVlZU05WUndrZUtHUW0xSjlJSE9GWiIsInlkOWQ2REl4VzY4dEhMbWxBVTZZUGxaVTV2LWRlQ2pzcHBhdWxwT19xUmhsV1NDVyFuCKutHeifAnDWHaTURdOIngSuKsamYyX0Fkd1Z6bndjMkhiTHhzTlJldEdsTlFLdDl1ZHozbGZqdTkwOEw5ZWViIiwiRVJnNjJpajFzVnJzdkRTS1hrbVlIemRzRlN3c29VR21GcEVRRVR6Sm5ROHc4eVc1b3plM1hmUDZabFJZVU8xWCIsIjdybGczUExtQzFMUHA3MHZmbEtuWHV1a29BQmpoMTE3b2t4SG5TamFLeENSd1VXVGdSVVo3WGU5dVR0WDVvUS0iLCJiMmUyR2NzUTlEay0zeXVpTW01azNTTERkLXpFXzZTQUdjMENNMUtpbGs4Y21ySjEzem5mT05yRXh3YTJJWnlpIiwiMnZYWmJObWt2SUJ5MnFVSElxc2Q4VHNCRmFLaFgtSW5ZVjU4Wk4wUm5nVHBLNmdSRDlfcWFrMWVJdGFMS2NicyJd'
      - export HASH2='W3siY2xpZW50SWQiOiJlNGQyMGIwMTMwMjI0MzMyOGQzNTg1MjQxYTFiMmIyNSIsImNsaWVudFNlY3JldCI6IjNkZDIxNjM1MjRjNjQ2NWM5MTZjYzRkNmU2ZmRhOTc3In0seyJjbGllbnRJZCI6ImUzODRkYmFkNmM3ZjQ2OTJiNjI3ZDRhMDZkOTE4M2NmIiwiY2xpZW50U2VjcmV0IjoiZGNkNzY2OGI2ZjAzNDM2Yzk5OTIzNDMyOWVlYTYxNmYifSx7ImNsaWVudElkIjoiZWVmZDBiYWU2NjRkNGY1ODhmMDg3NDFkOWU2ZjNlYmUiLCJjbGllbnRTZWNyZXQiOiI4YTE4ZDgyMGQ1YmQ0NTU3YjMwZmU3YTQ1OWY4ZjNhYiJ9LHsiY2xpZW50SWQiOiI4MWQxZGRhYzljNWU0Njk2YTlmNDdhZGZmODhkZmE5NSIsImNsaWVudFNlY3JldCI6ImY1NTg5ZTNiN2MwZjRiZTFhY2ZkODc3OWUyN2YzMWFhIn0seyJjbGllbnRJZCI6ImFhYzZlYmQ3Mjg5MDFuCKutHeifANdfDrOidsUckSwMDgxIiwiY2xpZW50U2VjcmV0IjoiNTk4ODk2OWFiMWUwNGUxNDhmNWRkZDI4ZWE4OThlMzMifSx7ImNsaWVudElkIjoiMDAwYWUwNzVjOGFhNDcxMTk0NTc5YmM3ZDhlYTY5MjciLCJjbGllbnRTZWNyZXQiOiJkNzBhZWM4ZjhjN2Q0ZTY0YTlhMDkwYTY0N2UxZDBmYiJ9LHsiY2xpZW50SWQiOiJhZjQ4OGI0MDhkNWM0NDAyYWQxNGY3MGNjZjMwMTdmOCIsImNsaWVudFNlY3JldCI6IjEzZTkwMzk5YTEyMjQzMjE4Y2U1MDE2YmZlZWIyNTA0In0seyJjbGllbnRJZCI6IjYyYmI1NWU2Y2Y2MDQwOTZhZDQ2ODBiYjI1NGY4ZjU1IiwiY2xpZW50U2VjcmV0IjoiZGM1NGIxMzhjODJkNGQ2OWJjZGQ0MDFlOWRjNmUwZTAifSx7ImNsaWVudElkIjoiZGFlM2QzNjQ4ODhiNDhjN2JhOTQwYmU3OWYxNDBjMDUiLCJjbGllbnRTZWNyZXQiOiJhMzU2ZjEyNDE4YjI0ODBkYWJmODRkOThhOTUxYTliYSJ9LHsiY2xpZW50SWQiOiIzZmM0OWZjNjkwYzA0NWVhYTBmMGEyNDI2ZGQ0YTkxZSIsImNsaWVudFNlY3JldCI6IjJiYjdkYTY1YzUwNjQ4YWVhOGI3YmMwOWQ0ZWY0MGZlIn1d'
      - $$flutter$$/bin/dart bin/create-secrets.dart --fdroid $HASH1 $HASH2
      - $$flutter$$/bin/flutter build apk --release --verbose --obfuscate --split-debug-info=.
      - find . | sed -e "s/[^-][^\/]*\// |/g" -e "s/|\([^ ]\)/|-\1/"

  - versionName: 2.7.0
    versionCode: 17
    commit: 4182234be653d8762863ec4949bd45ac56ad8ca1
    sudo:
      - apt-get update
      - apt-get install -y gcc libc-dev
    output: build/app/outputs/apk/release/*.apk
    srclibs:
      - flutter@3.7.6
      - metadata_god_rust@v0.3.2
      - rustup@1.25.2
    rm:
      - ios
      - linux
      - web
      - windows
      - macos
      - scripts
      - choco-struct
      - aur-struct
    prebuild:
      - sed -i -e 's/this.checkUpdate .*/this.checkUpdate = false,/' lib/provider/user_preferences_provider.dart
      - export PUB_CACHE=$(pwd)/.pub-cache
      - $$flutter$$/bin/flutter config --no-analytics
      - $$flutter$$/bin/flutter pub get
    scandelete:
      - .pub-cache
    build:
      - echo "POCKETBASE_URL=https://spotube.pockethost.io/" >> .env
      - export PUB_CACHE=$(pwd)/.pub-cache
      - pushd $$metadata_god_rust$$
      - export ANDROID_NDK_ROOT=$$NDK$$
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup target add aarch64-linux-android armv7-linux-androideabi x86_64-linux-android
        i686-linux-android
      - cargo install cargo-ndk
      - mkdir dist
      - cd rust
      - cargo ndk -t armeabi-v7a -t arm64-v8a -t x86_64 -t x86 -o ../dist build --release
      - popd
      - cp $$metadata_god_rust$$/dist/armeabi-v7a/librust.so .pub-cache/hosted/pub.dev/metadata_god-0.3.2/android/src/main/jniLibs/armeabi-v7a/librust.so
      - cp $$metadata_god_rust$$/dist/x86_64/librust.so .pub-cache/hosted/pub.dev/metadata_god-0.3.2/android/src/main/jniLibs/x86_64/librust.so
      - cp $$metadata_god_rust$$/dist/x86/librust.so .pub-cache/hosted/pub.dev/metadata_god-0.3.2/android/src/main/jniLibs/x86/librust.so
      - cp $$metadata_god_rust$$/dist/arm64-v8a/librust.so .pub-cache/hosted/pub.dev/metadata_god-0.3.2/android/src/main/jniLibs/arm64-v8a/librust.so
      - export HASH1='WyJUSnI4QlFITWRVVUlMQjZoYTRIZFUzMklMaFdzV1NMaEZWQWwxUGNzMU9uZmpGdVRxVWtQZEk0ODhnTmJIb2tRIiwiQURLZkJ5WUU4d1NYdHFZczV1Wm0wVEJRMlJGUkc2a29pZVFiNWJVRE9jRzUya29WVkxTS0lQUlNMbUdBaHgycCIsImZJcHB2bDBIeDZEMDQ5YzlWYnlwV2RLZllnbWdRMGc1YmV6ZmJmQXQzaHNjcGVDbFFXOTZGajNhc3JsTG00QjciLCAiNHd4MWlmejVNUW9VYnhyc1kxRENTMDJMTVNOdFZKUmY0SXJjWTB6OW9IVVlZU05WUndrZUtHUW0xSjlJSE9GWiIsInlkOWQ2REl4VzY4dEhMbWxBVTZZUGxaVTV2LWRlQ2pzcHBhdWxwT19xUmhsV1NDVyFuCKutHeifAnDWHaTURdOIngSuKsamYyX0Fkd1Z6bndjMkhiTHhzTlJldEdsTlFLdDl1ZHozbGZqdTkwOEw5ZWViIiwiRVJnNjJpajFzVnJzdkRTS1hrbVlIemRzRlN3c29VR21GcEVRRVR6Sm5ROHc4eVc1b3plM1hmUDZabFJZVU8xWCIsIjdybGczUExtQzFMUHA3MHZmbEtuWHV1a29BQmpoMTE3b2t4SG5TamFLeENSd1VXVGdSVVo3WGU5dVR0WDVvUS0iLCJiMmUyR2NzUTlEay0zeXVpTW01azNTTERkLXpFXzZTQUdjMENNMUtpbGs4Y21ySjEzem5mT05yRXh3YTJJWnlpIiwiMnZYWmJObWt2SUJ5MnFVSElxc2Q4VHNCRmFLaFgtSW5ZVjU4Wk4wUm5nVHBLNmdSRDlfcWFrMWVJdGFMS2NicyJd'
      - export HASH2='W3siY2xpZW50SWQiOiJlNGQyMGIwMTMwMjI0MzMyOGQzNTg1MjQxYTFiMmIyNSIsImNsaWVudFNlY3JldCI6IjNkZDIxNjM1MjRjNjQ2NWM5MTZjYzRkNmU2ZmRhOTc3In0seyJjbGllbnRJZCI6ImUzODRkYmFkNmM3ZjQ2OTJiNjI3ZDRhMDZkOTE4M2NmIiwiY2xpZW50U2VjcmV0IjoiZGNkNzY2OGI2ZjAzNDM2Yzk5OTIzNDMyOWVlYTYxNmYifSx7ImNsaWVudElkIjoiZWVmZDBiYWU2NjRkNGY1ODhmMDg3NDFkOWU2ZjNlYmUiLCJjbGllbnRTZWNyZXQiOiI4YTE4ZDgyMGQ1YmQ0NTU3YjMwZmU3YTQ1OWY4ZjNhYiJ9LHsiY2xpZW50SWQiOiI4MWQxZGRhYzljNWU0Njk2YTlmNDdhZGZmODhkZmE5NSIsImNsaWVudFNlY3JldCI6ImY1NTg5ZTNiN2MwZjRiZTFhY2ZkODc3OWUyN2YzMWFhIn0seyJjbGllbnRJZCI6ImFhYzZlYmQ3Mjg5MDFuCKutHeifANdfDrOidsUckSwMDgxIiwiY2xpZW50U2VjcmV0IjoiNTk4ODk2OWFiMWUwNGUxNDhmNWRkZDI4ZWE4OThlMzMifSx7ImNsaWVudElkIjoiMDAwYWUwNzVjOGFhNDcxMTk0NTc5YmM3ZDhlYTY5MjciLCJjbGllbnRTZWNyZXQiOiJkNzBhZWM4ZjhjN2Q0ZTY0YTlhMDkwYTY0N2UxZDBmYiJ9LHsiY2xpZW50SWQiOiJhZjQ4OGI0MDhkNWM0NDAyYWQxNGY3MGNjZjMwMTdmOCIsImNsaWVudFNlY3JldCI6IjEzZTkwMzk5YTEyMjQzMjE4Y2U1MDE2YmZlZWIyNTA0In0seyJjbGllbnRJZCI6IjYyYmI1NWU2Y2Y2MDQwOTZhZDQ2ODBiYjI1NGY4ZjU1IiwiY2xpZW50U2VjcmV0IjoiZGM1NGIxMzhjODJkNGQ2OWJjZGQ0MDFlOWRjNmUwZTAifSx7ImNsaWVudElkIjoiZGFlM2QzNjQ4ODhiNDhjN2JhOTQwYmU3OWYxNDBjMDUiLCJjbGllbnRTZWNyZXQiOiJhMzU2ZjEyNDE4YjI0ODBkYWJmODRkOThhOTUxYTliYSJ9LHsiY2xpZW50SWQiOiIzZmM0OWZjNjkwYzA0NWVhYTBmMGEyNDI2ZGQ0YTkxZSIsImNsaWVudFNlY3JldCI6IjJiYjdkYTY1YzUwNjQ4YWVhOGI3YmMwOWQ0ZWY0MGZlIn1d'
      - $$flutter$$/bin/dart bin/create-secrets.dart --fdroid $HASH1 $HASH2
      - $$flutter$$/bin/flutter build apk --release --verbose --obfuscate --split-debug-info=.
      - find . | sed -e "s/[^-][^\/]*\// |/g" -e "s/|\([^ ]\)/|-\1/"
    ndk: r25b

  - versionName: 2.7.1
    versionCode: 18
    commit: 42d1db64db77a3766ab5b01f0e59611e51a03aae
    sudo:
      - apt-get update
      - apt-get install -y gcc libc-dev
    output: build/app/outputs/apk/release/*.apk
    srclibs:
      - flutter@stable
      - metadata_god_rust@v0.4.1
      - rustup@1.25.2
    rm:
      - ios
      - linux
      - web
      - windows
      - macos
      - scripts
      - choco-struct
      - aur-struct
    prebuild:
      - export version=$(grep flutterSdkVersion .fvm/fvm_config.json | cut -d ":"
        -f2|cut -d "\"" -f2)
      - pushd $$flutter$$
      - git checkout -f $version
      - popd
      - sed -i -e 's/this.checkUpdate .*/this.checkUpdate = false,/' lib/provider/user_preferences_provider.dart
      - export PUB_CACHE=$(pwd)/.pub-cache
      - export PATH=$PUB_CACHE/bin/:$$flutter$$/bin/:$PATH
      - flutter config --no-analytics
      - flutter pub get
      - flutter pub global activate melos
    scandelete:
      - .pub-cache
    build:
      - echo "POCKETBASE_URL=https://spotube.pockethost.io/" >> .env
      - export PUB_CACHE=$(pwd)/.pub-cache
      - export PATH=$PUB_CACHE/bin/:$$flutter$$/bin/:$PATH
      - export ANDROID_NDK_ROOT=$$NDK$$
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup target add aarch64-linux-android armv7-linux-androideabi x86_64-linux-android
        i686-linux-android
      - cargo install cargo-ndk
      - pushd $$metadata_god_rust$$
      - melos bs
      - melos build:android
      - melos copylib:android
      - popd
      - export HASH1='WyJUSnI4QlFITWRVVUlMQjZoYTRIZFUzMklMaFdzV1NMaEZWQWwxUGNzMU9uZmpGdVRxVWtQZEk0ODhnTmJIb2tRIiwiQURLZkJ5WUU4d1NYdHFZczV1Wm0wVEJRMlJGUkc2a29pZVFiNWJVRE9jRzUya29WVkxTS0lQUlNMbUdBaHgycCIsImZJcHB2bDBIeDZEMDQ5YzlWYnlwV2RLZllnbWdRMGc1YmV6ZmJmQXQzaHNjcGVDbFFXOTZGajNhc3JsTG00QjciLCAiNHd4MWlmejVNUW9VYnhyc1kxRENTMDJMTVNOdFZKUmY0SXJjWTB6OW9IVVlZU05WUndrZUtHUW0xSjlJSE9GWiIsInlkOWQ2REl4VzY4dEhMbWxBVTZZUGxaVTV2LWRlQ2pzcHBhdWxwT19xUmhsV1NDVyFuCKutHeifAnDWHaTURdOIngSuKsamYyX0Fkd1Z6bndjMkhiTHhzTlJldEdsTlFLdDl1ZHozbGZqdTkwOEw5ZWViIiwiRVJnNjJpajFzVnJzdkRTS1hrbVlIemRzRlN3c29VR21GcEVRRVR6Sm5ROHc4eVc1b3plM1hmUDZabFJZVU8xWCIsIjdybGczUExtQzFMUHA3MHZmbEtuWHV1a29BQmpoMTE3b2t4SG5TamFLeENSd1VXVGdSVVo3WGU5dVR0WDVvUS0iLCJiMmUyR2NzUTlEay0zeXVpTW01azNTTERkLXpFXzZTQUdjMENNMUtpbGs4Y21ySjEzem5mT05yRXh3YTJJWnlpIiwiMnZYWmJObWt2SUJ5MnFVSElxc2Q4VHNCRmFLaFgtSW5ZVjU4Wk4wUm5nVHBLNmdSRDlfcWFrMWVJdGFMS2NicyJd'
      - export HASH2='W3siY2xpZW50SWQiOiJlNGQyMGIwMTMwMjI0MzMyOGQzNTg1MjQxYTFiMmIyNSIsImNsaWVudFNlY3JldCI6IjNkZDIxNjM1MjRjNjQ2NWM5MTZjYzRkNmU2ZmRhOTc3In0seyJjbGllbnRJZCI6ImUzODRkYmFkNmM3ZjQ2OTJiNjI3ZDRhMDZkOTE4M2NmIiwiY2xpZW50U2VjcmV0IjoiZGNkNzY2OGI2ZjAzNDM2Yzk5OTIzNDMyOWVlYTYxNmYifSx7ImNsaWVudElkIjoiZWVmZDBiYWU2NjRkNGY1ODhmMDg3NDFkOWU2ZjNlYmUiLCJjbGllbnRTZWNyZXQiOiI4YTE4ZDgyMGQ1YmQ0NTU3YjMwZmU3YTQ1OWY4ZjNhYiJ9LHsiY2xpZW50SWQiOiI4MWQxZGRhYzljNWU0Njk2YTlmNDdhZGZmODhkZmE5NSIsImNsaWVudFNlY3JldCI6ImY1NTg5ZTNiN2MwZjRiZTFhY2ZkODc3OWUyN2YzMWFhIn0seyJjbGllbnRJZCI6ImFhYzZlYmQ3Mjg5MDFuCKutHeifANdfDrOidsUckSwMDgxIiwiY2xpZW50U2VjcmV0IjoiNTk4ODk2OWFiMWUwNGUxNDhmNWRkZDI4ZWE4OThlMzMifSx7ImNsaWVudElkIjoiMDAwYWUwNzVjOGFhNDcxMTk0NTc5YmM3ZDhlYTY5MjciLCJjbGllbnRTZWNyZXQiOiJkNzBhZWM4ZjhjN2Q0ZTY0YTlhMDkwYTY0N2UxZDBmYiJ9LHsiY2xpZW50SWQiOiJhZjQ4OGI0MDhkNWM0NDAyYWQxNGY3MGNjZjMwMTdmOCIsImNsaWVudFNlY3JldCI6IjEzZTkwMzk5YTEyMjQzMjE4Y2U1MDE2YmZlZWIyNTA0In0seyJjbGllbnRJZCI6IjYyYmI1NWU2Y2Y2MDQwOTZhZDQ2ODBiYjI1NGY4ZjU1IiwiY2xpZW50U2VjcmV0IjoiZGM1NGIxMzhjODJkNGQ2OWJjZGQ0MDFlOWRjNmUwZTAifSx7ImNsaWVudElkIjoiZGFlM2QzNjQ4ODhiNDhjN2JhOTQwYmU3OWYxNDBjMDUiLCJjbGllbnRTZWNyZXQiOiJhMzU2ZjEyNDE4YjI0ODBkYWJmODRkOThhOTUxYTliYSJ9LHsiY2xpZW50SWQiOiIzZmM0OWZjNjkwYzA0NWVhYTBmMGEyNDI2ZGQ0YTkxZSIsImNsaWVudFNlY3JldCI6IjJiYjdkYTY1YzUwNjQ4YWVhOGI3YmMwOWQ0ZWY0MGZlIn1d'
      - dart bin/create-secrets.dart --fdroid $HASH1 $HASH2
      - flutter build apk --release --verbose --obfuscate --split-debug-info=.
      - find . | sed -e "s/[^-][^\/]*\// |/g" -e "s/|\([^ ]\)/|-\1/"
    ndk: r25b

  - versionName: 3.0.0
    versionCode: 19
    disable: https://github.com/KRTirtho/spotube/issues/430#issuecomment-1620242859
    commit: 6a196672bb08a69e972c82efdb6ce8636c98a22a
    sudo:
      - apt-get update
      - apt-get install -y gcc libc-dev
    output: build/app/outputs/apk/release/*.apk
    srclibs:
      - flutter@stable
      - metadata_god_rust@v0.4.1
      - rustup@1.25.2
    rm:
      - ios
      - linux
      - web
      - windows
      - macos
      - scripts
      - choco-struct
      - aur-struct
    prebuild:
      - export version=$(grep flutterSdkVersion .fvm/fvm_config.json | cut -d ":"
        -f2|cut -d "\"" -f2)
      - pushd $$flutter$$
      - git checkout -f $version
      - popd
      - sed -i -e 's/this.checkUpdate .*/this.checkUpdate = false,/' lib/provider/user_preferences_provider.dart
      - export PUB_CACHE=$(pwd)/.pub-cache
      - export PATH=$PUB_CACHE/bin/:$$flutter$$/bin/:$PATH
      - flutter config --no-analytics
      - flutter pub get
      - flutter pub global activate melos
    scandelete:
      - .pub-cache
    build:
      - echo "POCKETBASE_URL=https://spotube.pockethost.io/" >> .env
      - export PUB_CACHE=$(pwd)/.pub-cache
      - export PATH=$PUB_CACHE/bin/:$$flutter$$/bin/:$PATH
      - export ANDROID_NDK_ROOT=$$NDK$$
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup target add aarch64-linux-android armv7-linux-androideabi x86_64-linux-android
        i686-linux-android
      - cargo install cargo-ndk
      - pushd $$metadata_god_rust$$
      - melos bs
      - melos build:android
      - melos copylib:android
      - popd
      - export HASH1='WyJUSnI4QlFITWRVVUlMQjZoYTRIZFUzMklMaFdzV1NMaEZWQWwxUGNzMU9uZmpGdVRxVWtQZEk0ODhnTmJIb2tRIiwiQURLZkJ5WUU4d1NYdHFZczV1Wm0wVEJRMlJGUkc2a29pZVFiNWJVRE9jRzUya29WVkxTS0lQUlNMbUdBaHgycCIsImZJcHB2bDBIeDZEMDQ5YzlWYnlwV2RLZllnbWdRMGc1YmV6ZmJmQXQzaHNjcGVDbFFXOTZGajNhc3JsTG00QjciLCAiNHd4MWlmejVNUW9VYnhyc1kxRENTMDJMTVNOdFZKUmY0SXJjWTB6OW9IVVlZU05WUndrZUtHUW0xSjlJSE9GWiIsInlkOWQ2REl4VzY4dEhMbWxBVTZZUGxaVTV2LWRlQ2pzcHBhdWxwT19xUmhsV1NDVyFuCKutHeifAnDWHaTURdOIngSuKsamYyX0Fkd1Z6bndjMkhiTHhzTlJldEdsTlFLdDl1ZHozbGZqdTkwOEw5ZWViIiwiRVJnNjJpajFzVnJzdkRTS1hrbVlIemRzRlN3c29VR21GcEVRRVR6Sm5ROHc4eVc1b3plM1hmUDZabFJZVU8xWCIsIjdybGczUExtQzFMUHA3MHZmbEtuWHV1a29BQmpoMTE3b2t4SG5TamFLeENSd1VXVGdSVVo3WGU5dVR0WDVvUS0iLCJiMmUyR2NzUTlEay0zeXVpTW01azNTTERkLXpFXzZTQUdjMENNMUtpbGs4Y21ySjEzem5mT05yRXh3YTJJWnlpIiwiMnZYWmJObWt2SUJ5MnFVSElxc2Q4VHNCRmFLaFgtSW5ZVjU4Wk4wUm5nVHBLNmdSRDlfcWFrMWVJdGFMS2NicyJd'
      - export HASH2='W3siY2xpZW50SWQiOiJlNGQyMGIwMTMwMjI0MzMyOGQzNTg1MjQxYTFiMmIyNSIsImNsaWVudFNlY3JldCI6IjNkZDIxNjM1MjRjNjQ2NWM5MTZjYzRkNmU2ZmRhOTc3In0seyJjbGllbnRJZCI6ImUzODRkYmFkNmM3ZjQ2OTJiNjI3ZDRhMDZkOTE4M2NmIiwiY2xpZW50U2VjcmV0IjoiZGNkNzY2OGI2ZjAzNDM2Yzk5OTIzNDMyOWVlYTYxNmYifSx7ImNsaWVudElkIjoiZWVmZDBiYWU2NjRkNGY1ODhmMDg3NDFkOWU2ZjNlYmUiLCJjbGllbnRTZWNyZXQiOiI4YTE4ZDgyMGQ1YmQ0NTU3YjMwZmU3YTQ1OWY4ZjNhYiJ9LHsiY2xpZW50SWQiOiI4MWQxZGRhYzljNWU0Njk2YTlmNDdhZGZmODhkZmE5NSIsImNsaWVudFNlY3JldCI6ImY1NTg5ZTNiN2MwZjRiZTFhY2ZkODc3OWUyN2YzMWFhIn0seyJjbGllbnRJZCI6ImFhYzZlYmQ3Mjg5MDFuCKutHeifANdfDrOidsUckSwMDgxIiwiY2xpZW50U2VjcmV0IjoiNTk4ODk2OWFiMWUwNGUxNDhmNWRkZDI4ZWE4OThlMzMifSx7ImNsaWVudElkIjoiMDAwYWUwNzVjOGFhNDcxMTk0NTc5YmM3ZDhlYTY5MjciLCJjbGllbnRTZWNyZXQiOiJkNzBhZWM4ZjhjN2Q0ZTY0YTlhMDkwYTY0N2UxZDBmYiJ9LHsiY2xpZW50SWQiOiJhZjQ4OGI0MDhkNWM0NDAyYWQxNGY3MGNjZjMwMTdmOCIsImNsaWVudFNlY3JldCI6IjEzZTkwMzk5YTEyMjQzMjE4Y2U1MDE2YmZlZWIyNTA0In0seyJjbGllbnRJZCI6IjYyYmI1NWU2Y2Y2MDQwOTZhZDQ2ODBiYjI1NGY4ZjU1IiwiY2xpZW50U2VjcmV0IjoiZGM1NGIxMzhjODJkNGQ2OWJjZGQ0MDFlOWRjNmUwZTAifSx7ImNsaWVudElkIjoiZGFlM2QzNjQ4ODhiNDhjN2JhOTQwYmU3OWYxNDBjMDUiLCJjbGllbnRTZWNyZXQiOiJhMzU2ZjEyNDE4YjI0ODBkYWJmODRkOThhOTUxYTliYSJ9LHsiY2xpZW50SWQiOiIzZmM0OWZjNjkwYzA0NWVhYTBmMGEyNDI2ZGQ0YTkxZSIsImNsaWVudFNlY3JldCI6IjJiYjdkYTY1YzUwNjQ4YWVhOGI3YmMwOWQ0ZWY0MGZlIn1d'
      - dart bin/create-secrets.dart --fdroid $HASH1 $HASH2
      - flutter build apk --release --verbose --obfuscate --split-debug-info=.
      - find . | sed -e "s/[^-][^\/]*\// |/g" -e "s/|\([^ ]\)/|-\1/"
    ndk: r25b

AutoUpdateMode: Version
UpdateCheckMode: Tags
UpdateCheckData: pubspec.yaml|version:\s.+\+(\d+)|.|version:\s(.+)\+
CurrentVersion: 3.0.0
CurrentVersionCode: 19
