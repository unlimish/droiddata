Categories:
  - Internet
  - Security
License: MIT
AuthorName: SaeedDev94
SourceCode: https://github.com/SaeedDev94/Xray
IssueTracker: https://github.com/SaeedDev94/Xray/issues

AutoName: Xray

RepoType: git
Repo: https://github.com/SaeedDev94/Xray
Binaries: https://github.com/SaeedDev94/Xray/releases/download/v%v/Xray-v%v-%c.apk

Builds:
  - versionName: 4.1.0
    versionCode: 51
    commit: 0311d9814a29acac044475d7c52ce465ac68ae9b
    subdir: app
    submodules: true
    sudo:
      - apt-get update
      - apt-get install -y openjdk-17-jdk-headless
      - update-java-alternatives -a
      - apt-get install -t bullseye-backports -y golang-go
      - apt-get install -y gcc libc-dev
    gradle:
      - yes
    srclibs:
      - go@go1.21.6
    prebuild: sdkmanager "platforms;android-34" "build-tools;34.0.0"
    build:
      - pushd $$go$$/src
      - ./make.bash
      - popd
      - export GOPATH=$$go$$
      - export PATH="$GOPATH/bin:$PATH"
      - pushd ../libXray
      - go install golang.org/x/mobile/cmd/gomobile@v0.0.0-20240112133503-c713f31d574b
      - go mod download
      - gomobile init
      - gomobile bind -o "../app/libs/libXray.aar" -androidapi 29 -target android/arm
        -ldflags="-buildid=" -trimpath
      - popd
    ndk: 26.1.10909125
    gradleprops:
      - abiId=1
      - abiTarget=armeabi-v7a

  - versionName: 4.1.0
    versionCode: 52
    commit: 0311d9814a29acac044475d7c52ce465ac68ae9b
    subdir: app
    submodules: true
    sudo:
      - apt-get update
      - apt-get install -y openjdk-17-jdk-headless
      - update-java-alternatives -a
      - apt-get install -t bullseye-backports -y golang-go
      - apt-get install -y gcc libc-dev
    gradle:
      - yes
    srclibs:
      - go@go1.21.6
    prebuild: sdkmanager "platforms;android-34" "build-tools;34.0.0"
    build:
      - pushd $$go$$/src
      - ./make.bash
      - popd
      - export GOPATH=$$go$$
      - export PATH="$GOPATH/bin:$PATH"
      - pushd ../libXray
      - go install golang.org/x/mobile/cmd/gomobile@v0.0.0-20240112133503-c713f31d574b
      - go mod download
      - gomobile init
      - gomobile bind -o "../app/libs/libXray.aar" -androidapi 29 -target android/arm64
        -ldflags="-buildid=" -trimpath
      - popd
    ndk: 26.1.10909125
    gradleprops:
      - abiId=2
      - abiTarget=arm64-v8a

  - versionName: 4.1.0
    versionCode: 53
    commit: 0311d9814a29acac044475d7c52ce465ac68ae9b
    subdir: app
    submodules: true
    sudo:
      - apt-get update
      - apt-get install -y openjdk-17-jdk-headless
      - update-java-alternatives -a
      - apt-get install -t bullseye-backports -y golang-go
      - apt-get install -y gcc libc-dev
    gradle:
      - yes
    srclibs:
      - go@go1.21.6
    prebuild: sdkmanager "platforms;android-34" "build-tools;34.0.0"
    build:
      - pushd $$go$$/src
      - ./make.bash
      - popd
      - export GOPATH=$$go$$
      - export PATH="$GOPATH/bin:$PATH"
      - pushd ../libXray
      - go install golang.org/x/mobile/cmd/gomobile@v0.0.0-20240112133503-c713f31d574b
      - go mod download
      - gomobile init
      - gomobile bind -o "../app/libs/libXray.aar" -androidapi 29 -target android/386
        -ldflags="-buildid=" -trimpath
      - popd
    ndk: 26.1.10909125
    gradleprops:
      - abiId=3
      - abiTarget=x86

  - versionName: 4.1.0
    versionCode: 54
    commit: 0311d9814a29acac044475d7c52ce465ac68ae9b
    subdir: app
    submodules: true
    sudo:
      - apt-get update
      - apt-get install -y openjdk-17-jdk-headless
      - update-java-alternatives -a
      - apt-get install -t bullseye-backports -y golang-go
      - apt-get install -y gcc libc-dev
    gradle:
      - yes
    srclibs:
      - go@go1.21.6
    prebuild: sdkmanager "platforms;android-34" "build-tools;34.0.0"
    build:
      - pushd $$go$$/src
      - ./make.bash
      - popd
      - export GOPATH=$$go$$
      - export PATH="$GOPATH/bin:$PATH"
      - pushd ../libXray
      - go install golang.org/x/mobile/cmd/gomobile@v0.0.0-20240112133503-c713f31d574b
      - go mod download
      - gomobile init
      - gomobile bind -o "../app/libs/libXray.aar" -androidapi 29 -target android/amd64
        -ldflags="-buildid=" -trimpath
      - popd
    ndk: 26.1.10909125
    gradleprops:
      - abiId=4
      - abiTarget=x86_64

AllowedAPKSigningKeys: 1658411ab97758c6ce0001befcdeb29c2219ee19d80501f8061bb008d79d0360

AutoUpdateMode: Version
UpdateCheckMode: Tags
VercodeOperation:
  - '%c + 1'
  - '%c + 2'
  - '%c + 3'
  - '%c + 4'
UpdateCheckData: app/versionCode.txt|(\d+)|app/build.gradle|versionName '([\d.]+)'
CurrentVersion: 4.1.0
CurrentVersionCode: 54
