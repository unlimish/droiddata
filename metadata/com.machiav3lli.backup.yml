Categories:
  - System
License: MIT
AuthorName: Antonios Hazim
SourceCode: https://github.com/machiav3lli/oandbackupx
IssueTracker: https://github.com/machiav3lli/oandbackupx/issues
Changelog: https://github.com/machiav3lli/oandbackupx/blob/HEAD/changelog.md

AutoName: OAndBackupX

RequiresRoot: 'yes'

RepoType: git
Repo: https://github.com/machiav3lli/oandbackupx

Builds:
  - versionName: 0.2.7
    versionCode: 207
    commit: cd9cf5b3d6a7e06c1b5b2285a68ec1b9d8b6ab6a
    gradle:
      - universal
    srclibs:
      - rustup@1.21.1
    prebuild: sed -i -e '/set -e/a\source $HOME/.cargo/env' build.sh
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.42.0
      - rustup target add armv7-linux-androideabi
      - rustup target add aarch64-linux-android
      - rustup target add i686-linux-android
      - rustup target add x86_64-linux-android
      - $$NDK$$/build/tools/make_standalone_toolchain.py --api 18 --arch=arm --install-dir=arm
      - $$NDK$$/build/tools/make_standalone_toolchain.py --api 21 --arch=arm64 --install-dir=arm64
      - $$NDK$$/build/tools/make_standalone_toolchain.py --api 18 --arch=x86 --install-dir=x86
      - $$NDK$$/build/tools/make_standalone_toolchain.py --api 21 --arch=x86_64 --install-dir=x86_64
      - mkdir oab-utils/.cargo
      - echo -e "[target.armv7-linux-androideabi]\n linker = \""$(realpath arm)"/bin/arm-linux-androideabi-clang\"\n"
        >> oab-utils/.cargo/config
      - echo -e "[target.aarch64-linux-android]\n linker = \""$(realpath arm64)"/bin/aarch64-linux-android-clang\"\n"
        >> oab-utils/.cargo/config
      - echo -e "[target.i686-linux-android]\n linker = \""$(realpath x86)"/bin/i686-linux-android-clang\"\n"
        >> oab-utils/.cargo/config
      - echo -e "[target.x86_64-linux-android]\n linker = \""$(realpath x86_64)"/bin/x86_64-linux-android-clang\"\n"
        >> oab-utils/.cargo/config
    ndk: r21

ArchivePolicy: 3 versions
AutoUpdateMode: Version %v
UpdateCheckMode: Tags
CurrentVersion: 0.2.7
CurrentVersionCode: 207
