Categories:
  - Sports & Health
License: GPL-3.0-only
AuthorName: Vishnu Raghav B
AuthorEmail: apps@vishnuraghav.com
AuthorWebSite: https://www.vishnuraghav.com
WebSite: https://enrecipes.vercel.app
SourceCode: https://github.com/vishnuraghavb/EnRecipes
IssueTracker: https://github.com/vishnuraghavb/EnRecipes/issues
Translation: https://hosted.weblate.org/engage/enrecipes
Changelog: https://github.com/vishnuraghavb/EnRecipes/releases
Donate: https://www.vishnuraghav.com/donate
Liberapay: vishnuraghavb
Bitcoin: bc1qjxwecmmajnl7qvyzwqqka60tfvcyj9qhy2lpq8

RepoType: git
Repo: https://github.com/vishnuraghavb/EnRecipes.git

Builds:
  - versionName: 1.3.2
    versionCode: 7
    commit: 80dd4c20182ca52caac3d821f67f61420d050362
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y lib32z1
      - curl -Lo node.tar.gz https://nodejs.org/dist/v10.23.1/node-v10.23.1-linux-x64.tar.gz
      - echo "2a5f9d862468a4c677630923531e52339526cfd075cc6df30da4636782eb7bda node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz
      - cp -a node-v10.23.1-linux-x64/. /usr/local/
      - npm -g install nativescript
    init:
      - $$SDK$$/tools/bin/sdkmanager "platforms;android-30" "build-tools;30.0.3" >
        /dev/null
      - npm install --unsafe-perm
    output: platforms/android/app/build/outputs/apk/release/app-release-unsigned.apk
    srclibs:
      - NativeScript_android-runtime@v7.0.1
      - NativeScript_NativeScript@8.0.0-alpha.0-core
      - triniwiz_nativescript-plugins@92a9d5ab196fc64fb0841123c8fa235648bbb829
    scandelete:
      - node_modules
    build:
      - cd $$triniwiz_nativescript-plugins$$/packages/nativescript-couchbase/src-native/TNSCouchbase/couchbase
      - gradle assembleRelease
      - cp build/outputs/aar/couchbase-release.aar ../../../../../../../com.vishnuraghav.enrecipes/node_modules/@triniwiz/nativescript-couchbase/platforms/android/couchbase-release.aar
      - cd $$NativeScript_NativeScript$$/packages/ui-mobile-base/android/widgets
      - rm -rf $$triniwiz_nativescript-plugins$$
      - gradle assembleRelease
      - mkdir -p ../../../../../../com.vishnuraghav.enrecipes/node_modules/@nativescript/core/platforms/android
      - cp build/outputs/aar/widgets-release.aar ../../../../../../com.vishnuraghav.enrecipes/node_modules/@nativescript/core/platforms/android/widgets-release.aar
      - cd $$NativeScript_android-runtime$$
      - rm -rf $$NativeScript_NativeScript$$
      - export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
      - cp $$SDK$$/build-tools/30.0.3/lib/dx.jar test-app/build-tools/android-metadata-generator/src/libs/dx.jar
      - gradle
      - mkdir -p ../../com.vishnuraghav.enrecipes/node_modules/@nativescript/android
      - rm -rf ../../com.vishnuraghav.enrecipes/node_modules/@nativescript/android/framework
      - cp -r dist/framework ../../com.vishnuraghav.enrecipes/node_modules/@nativescript/android
      - cd ../../com.vishnuraghav.enrecipes
      - rm -rf $$NativeScript_android-runtime$$
      - ns prepare android
      - cd platforms/android/app
      - gradle "assembleRelease" "-PappPath=app" "-PappResourcesPath=app/resources"
    ndk: r20b

AutoUpdateMode: Version v%v
UpdateCheckMode: HTTP
UpdateCheckData: https://raw.githubusercontent.com/vishnuraghavb/EnRecipes/main/app/resources/Android/app.gradle|versionCode\s(\d+)|.|versionName\s'(.+)'
CurrentVersion: 1.3.2
CurrentVersionCode: 7
