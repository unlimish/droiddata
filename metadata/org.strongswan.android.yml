Categories:
  - Connectivity
  - Internet
  - Security
License: GPL-2.0-or-later
SourceCode: https://github.com/strongswan/strongswan
IssueTracker: https://github.com/strongswan/strongswan/issues
Changelog: https://github.com/strongswan/strongswan/blob/HEAD/NEWS

Summary: strongSwan is an OpenSource IPsec-based VPN solution
Description: The VPN client supports IKEv2 only with EAP-MD5 or EAP-MSCHAPv2 password-based,
    or certificate based user authentication and certificate-based VPN gateway authentication.

RepoType: git
Repo: https://github.com/strongswan/strongswan

Builds:
  - versionName: 2.3.2
    versionCode: 74
    commit: 5.9.2
    subdir: src/frontends/android/app
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y --no-install-recommends libgmp-dev
    gradle:
      - yes
    srclibs:
      - OpenSSL@OpenSSL_1_1_1k
    rm:
      - testing
    prebuild: sed -i -e "/clean.dependsOn 'cleanNative'/d" build.gradle
    build:
      - lib="$PWD/src/main/jni/openssl"
      - PATH=$ANDROID_NDK/toolchains/llvm/prebuilt/linux-x86_64/bin:$PATH
      - pushd $$OpenSSL$$
      - CC=armv7a-linux-androideabi16-clang ./Configure android-arm no-shared no-ssl3
        no-engine no-dso no-asm no-hw no-comp no-stdio -fPIC -DOPENSSL_PIC -D__ANDROID_API__=16
        -ffast-math -O3 -funroll-loops
      - make -j $(nproc)
      - mkdir -p "${lib}/armeabi-v7a"
      - cp libcrypto.a ${lib}/armeabi-v7a/
      - cp libssl.a ${lib}/armeabi-v7a/
      - make distclean
      - CC=aarch64-linux-android21-clang ./Configure android-arm64 no-shared no-ssl3
        no-engine no-dso no-asm no-hw no-comp no-stdio -fPIC -DOPENSSL_PIC -D__ANDROID_API__=21
        -ffast-math -O3 -funroll-loops
      - make -j $(nproc)
      - mkdir -p "${lib}/arm64-v8a"
      - cp libcrypto.a ${lib}/arm64-v8a/
      - cp libssl.a ${lib}/arm64-v8a/
      - make distclean
      - CC=i686-linux-android16-clang ./Configure android-x86 no-shared no-ssl3 no-engine
        no-dso no-asm no-hw no-comp no-stdio -fPIC -DOPENSSL_PIC -D__ANDROID_API__=16
        -ffast-math -O3 -funroll-loops
      - make -j $(nproc)
      - mkdir -p "${lib}/x86"
      - cp libcrypto.a ${lib}/x86/
      - cp libssl.a ${lib}/x86/
      - make distclean
      - CC=x86_64-linux-android21-clang ./Configure android-x86_64 no-shared no-ssl3
        no-engine no-dso no-asm no-hw no-comp no-stdio -fPIC -DOPENSSL_PIC -D__ANDROID_API__=21
        -ffast-math -O3 -funroll-loops
      - make -j $(nproc)
      - mkdir -p "${lib}/x86_64"
      - cp libcrypto.a ${lib}/x86_64/
      - cp libssl.a ${lib}/x86_64/
      - cp -R include/ ${lib}/
      - make distclean
      - popd
      - echo "LOCAL_PATH := \$(call my-dir)" >"${lib}/Android.mk"
      - echo "include \$(CLEAR_VARS)" >>"${lib}/Android.mk"
      - echo "LOCAL_MODULE := libcrypto_static" >>"${lib}/Android.mk"
      - echo "LOCAL_SRC_FILES := \$(TARGET_ARCH_ABI)/libcrypto.a" >>"${lib}/Android.mk"
      - echo "LOCAL_EXPORT_C_INCLUDES := \$(LOCAL_PATH)/include" >>"${lib}/Android.mk"
      - echo "include \$(PREBUILT_STATIC_LIBRARY)" >>"${lib}/Android.mk"
      - echo "include \$(CLEAR_VARS)" >>"${lib}/Android.mk"
      - echo "LOCAL_MODULE := libssl_static" >>"${lib}/Android.mk"
      - echo "LOCAL_SRC_FILES := \$(TARGET_ARCH_ABI)/libssl.a" >>"${lib}/Android.mk"
      - echo "LOCAL_EXPORT_C_INCLUDES := \$(LOCAL_PATH)/include" >>"${lib}/Android.mk"
      - echo "include \$(PREBUILT_STATIC_LIBRARY)" >>"${lib}/Android.mk"
      - cd ../../../../
      - ./autogen.sh
      - ./configure
      - make dist
    ndk: r21e

AutoUpdateMode: None
UpdateCheckMode: None
CurrentVersion: 2.3.2
CurrentVersionCode: 74
