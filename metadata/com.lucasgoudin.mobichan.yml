Categories:
  - Internet
License: Apache-2.0
AuthorName: Rukkaitto
AuthorEmail: mobichan.contact@gmail.com
SourceCode: https://github.com/Rukkaitto/mobichan
IssueTracker: https://github.com/Rukkaitto/mobichan/issues

AutoName: Mobichan

RepoType: git
Repo: https://github.com/Rukkaitto/mobichan.git

Builds:
  - versionName: 2.0.2
    versionCode: 22
    commit: v2.0.2
    output: build/app/outputs/flutter-apk/app-release.apk
    srclibs:
      - flutter@2.10.0
    rm:
      - ios
    prebuild:
      - wget -O /tmp/cmdline-tools.zip -t 5 "https://dl.google.com/android/repository/commandlinetools-linux-7583922_latest.zip"
      - echo "124f2d5115eee365df6cf3228ffbca6fc3911d16f8025bebd5b1c6e2fcfa7faf /tmp/cmdline-tools.zip"  |
        sha256sum -c -
      - unzip -q -o /tmp/cmdline-tools.zip -d /tmp/cmdline-tools
      - rm /tmp/cmdline-tools.zip
      - mkdir -p ${ANDROID_SDK_ROOT}/cmdline-tools/tools
      - mv /tmp/cmdline-tools/cmdline-tools/* ${ANDROID_SDK_ROOT}/cmdline-tools/tools
        || true
      - export PATH=${ANDROID_SDK_ROOT}/cmdline-tools/tools/bin:${PATH}
      - yes | sdkmanager --licenses
      - sdkmanager "build-tools;30.0.3" "build-tools;31.0.0" "platforms;android-31"
    build:
      - $$flutter$$/bin/flutter config --no-analytics
      - $$flutter$$/bin/flutter packages pub get
      - echo "Y2xhc3MgU2VjcmV0cyB7CiAgc3RhdGljIFN0cmluZyBzdXBhYmFzZVVybCA9ICdodHRwczovL3dsZW1zcHdudmhja3BveGZlaXlwLnN1cGFiYXNlLmNvJzsKICBzdGF0aWMgU3RyaW5nIHN1cGFiYXNlS2V5ID0KICAgICAgJ2V5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUp5YjJ4bElqb2ljMlZ5ZG1salpWOXliMnhsSWl3aWFXRjBJam94TmpRd01UWTNNVGMyTENKbGVIQWlPakU1TlRVM05ETXhOelo5LnEzd3I3R0dTaVFoLUZRTV9DX0N0MFo1ZGo1TEQtclNmdTVob2FwUkIwUHcnOwp9Cg=="
        | base64 --decode > lib/secrets.dart
      - $$flutter$$/bin/flutter build apk --dart-define=env=play_store

AutoUpdateMode: Version v%v
UpdateCheckMode: Tags
UpdateCheckData: pubspec.yaml|version:\s.+\+(\d+)|.|version:\s(.+)\+
CurrentVersion: 2.0.2
CurrentVersionCode: 22
