Categories:
  - Internet
License: GPL-3.0-or-later
AuthorName: pavelsof
AuthorWebSite: https://pavelsof.com
SourceCode: https://github.com/pavelsof/mobile-wormhole
IssueTracker: https://github.com/pavelsof/mobile-wormhole/issues
Changelog: https://github.com/pavelsof/mobile-wormhole/blob/HEAD/CHANGELOG.md

RepoType: git
Repo: https://github.com/pavelsof/mobile-wormhole

Builds:
  - versionName: 0.2.0
    versionCode: 200
    commit: v0.2.0
    srclibs:
      - cpython@v3.7.7
    sudo:
      - apt-get update
      - apt-get install -y build-essential libffi-dev libltdl-dev
      - cd build/srclib/cpython
      - ./configure
      - make -j`nproc`
      - make altinstall
    output: bin/wormhole-$$VERSION$$-armeabi-v7a-release-unsigned.apk
    prebuild:
      - echo PREBUILD
      - sed -r "s:#?android.sdk_path =.*:android.sdk_path = $$SDK$$:" -i buildozer.spec
      - sed -r "s:#?android.ndk_path =.*:android.ndk_path = $$NDK$$:" -i buildozer.spec
      - python3.7 -m venv ../../venv
      - source ../../venv/bin/activate
      - pip install -r requirements.txt
    build:
      - echo BUILD
      - source ../../venv/bin/activate
      - buildozer android release
    ndk: r19c

AutoUpdateMode: Version v%v
UpdateCheckMode: Tags
CurrentVersion: 0.2.0
CurrentVersionCode: 200
